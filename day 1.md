
## 5.1 Interrupt and Its Importance

An interrupt is a signal sent to the processor that temporarily stops the execution of the current program to handle some urgent event. Think of it like someone tapping you on the shoulder while you're reading a book.

**Importance of interrupts:**

- Allows real-time response to external events
- Enables efficient I/O operations without continuous CPU monitoring
- Permits handling of exceptions and errors during program execution
- Supports multitasking by allowing the CPU to switch between tasks
- Conserves CPU resources by avoiding wasteful polling

## 5.2 Polling vs Interrupt

**Polling:**

- CPU continuously checks devices to see if they need service
- Wastes CPU cycles checking devices that don't need attention
- Simple to implement but inefficient
- Example: Checking every second if a key has been pressed

**Interrupt:**

- Devices signal the CPU only when they need attention
- CPU free to do other work until interrupted
- More efficient use of CPU time
- More complex to implement but better performance
- Example: Keyboard generates interrupt only when a key is pressed

## 5.3 Types of Interrupts

1. **Hardware Interrupts:** Generated by external devices
    
    - **Maskable Interrupts:** Can be disabled/ignored by the CPU
    - **Non-maskable Interrupts (NMI):** Critical and cannot be ignored
2. **Software Interrupts:** Generated by executing an instruction
    
    - Program-initiated to request OS services
    - Example: INT instruction in x86 processors
3. **Exceptions:**
    
    - **Faults:** Conditions that can be corrected, execution can continue
    - **Traps:** Reported immediately after instruction execution
    - **Aborts:** Severe errors, program execution cannot continue
4. Based on timing:
    
    - **Synchronous:** Occur at specific points in program execution
    - **Asynchronous:** Can occur at any time

## 5.4 Interrupts in 8085 and Interrupt Instructions

The 8085 supports 5 hardware interrupts:

- **TRAP:** Highest priority, non-maskable
- **RST 7.5:** Maskable, edge-triggered
- **RST 6.5:** Maskable, level-triggered
- **RST 5.5:** Maskable, level-triggered
- **INTR:** Lowest priority, maskable

**Key 8085 interrupt instructions:**

- **EI (Enable Interrupt):** Enables maskable interrupts
- **DI (Disable Interrupt):** Disables maskable interrupts
- **RIM (Read Interrupt Mask):** Reads interrupt mask status
- **SIM (Set Interrupt Mask):** Sets interrupt mask status

## 5.5 Interrupt Service Routine

An Interrupt Service Routine (ISR) is a specific program that executes when an interrupt occurs:

1. **Key components:**
    
    - Saving context (registers, flags)
    - Processing the interrupt
    - Restoring context
    - Returning to main program
2. **Steps in handling an interrupt:**
    
    - Finish current instruction
    - Save program counter on stack
    - Jump to ISR address
    - Execute ISR
    - Return using IRET/RET instruction

## 5.6 Interrupt Processing in 8085

When an interrupt occurs in 8085:

1. CPU completes current instruction
2. Interrupt is acknowledged if enabled
3. Program Counter is saved
4. Interrupt service is initiated:
    - For RST interrupts, control transfers to predefined memory location
    - For INTR, device provides instruction (usually RST)
5. ISR is executed
6. RET instruction at end of ISR returns control to main program

**Specific memory locations for 8085 interrupts:**

- TRAP: 0024H
- RST 7.5: 003CH
- RST 6.5: 0034H
- RST 5.5: 002CH
- INTR: Address supplied by interrupting device

## 5.7 Using Programmable Interrupt Controllers (PIC)

The 8259 PIC extends interrupt capabilities:

1. **Features:**
    
    - Manages up to 8 interrupt sources (can be cascaded for 64)
    - Prioritizes interrupts
    - Masks individual interrupts
    - Provides vectored interrupts
2. **Operating modes:**
    
    - Fully nested mode
    - Rotating priority mode
    - Special mask mode
    - Polled mode
3. **Programming the 8259:**
    
    - Initialization Command Words (ICW1-ICW4)
    - Operation Command Words (OCW1-OCW3)

## 5.8 Interrupt in 8086 and Interrupt Vector Table

The 8086 uses a table-based approach to interrupts:

1. **Interrupt Vector Table (IVT):**
    
    - Located at beginning of memory (0000H to 03FFH)
    - 256 interrupts, each with 4-byte entry (CS:IP)
    - Each entry points to the address of an ISR
2. **Types of 8086 interrupts:**
    
    - Type 0: Divide by zero
    - Type 1: Single step (debugging)
    - Type 2: NMI
    - Type 3: Breakpoint
    - Type 4: Overflow
    - Types 5-31: Reserved
    - Types 32-255: Available for hardware/software
3. **Hardware interrupts:**
    
    - INTR (maskable)
    - NMI (non-maskable)

## 5.9 Interrupt Processing in 8086

When an interrupt occurs in 8086:

1. Flags are pushed onto stack
2. IF (Interrupt Flag) and TF (Trap Flag) are cleared
3. CS and IP are pushed onto stack
4. New CS:IP loaded from interrupt vector table
5. ISR executes
6. IRET instruction restores flags, CS, and IP

**Key differences from 8085:**

- Uses interrupt vector table instead of fixed memory locations
- More sophisticated interrupt priority system
- Supports software interrupts (INT instruction)
- Provides more control over interrupt handling

